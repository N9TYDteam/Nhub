--made by N9Tyd this is test version with low security enjoy it


local Players = game:GetService("Players")
local UIS = game:GetService("UserInputService")
local RunService = game:GetService("RunService")
local TeleportService = game:GetService("TeleportService")
local MarketplaceService = game:GetService("MarketplaceService")
local HttpService = game:GetService("HttpService")

local player = Players.LocalPlayer
local playerGui = player:WaitForChild("PlayerGui")

local destroyed = false 

local function showAchievement(text)
    pcall(function()
        game.StarterGui:SetCore("SendNotification", {
            Title = "Nhub console",
            Text = tostring(text),
            Duration = 4,
            Icon = "rbxassetid://88854609427595"
        })
    end)
end

local oldPrint = print
function print(...)
    local msg = table.concat({...}, " ")
    oldPrint(msg)
    showAchievement(msg)
end


local function enableAutoScaling(screenGui, baseWidth, baseHeight, minScale, maxScale)
    baseWidth = baseWidth or 1920
    baseHeight = baseHeight or 1080
    minScale = minScale or 0.55
    maxScale = maxScale or 1.2

    if not screenGui then return end
    local existing = screenGui:FindFirstChild("AutoUIScale")
    if existing then existing:Destroy() end
    local uiScale = Instance.new("UIScale")
    uiScale.Name = "AutoUIScale"
    uiScale.Parent = screenGui

    local function updateScale()
        local cam = workspace.CurrentCamera
        if not cam then return end
        local vp = cam.ViewportSize
        if not vp then return end
        local vw, vh = vp.X, vp.Y
        local scale = math.min(vw / baseWidth, vh / baseHeight)
        scale = math.clamp(scale, minScale, maxScale)
        uiScale.Scale = scale
    end

    updateScale()
    local cam = workspace.CurrentCamera
    if cam then
        cam:GetPropertyChangedSignal("ViewportSize"):Connect(updateScale)
    end
end

local function trim(s) return tostring(s):match("^%s*(.-)%s*$") end


local accessGui = Instance.new("ScreenGui")
accessGui.Name = "AccessKeyGUI"
accessGui.ResetOnSpawn = false
accessGui.Parent = playerGui

enableAutoScaling(accessGui, 1920, 1080, 0.55, 1.15)

local bg = Instance.new("Frame")
bg.Size = UDim2.new(1, 0, 1, 0)
bg.BackgroundColor3 = Color3.new(0, 0, 0)
bg.BackgroundTransparency = 0.4
bg.Parent = accessGui

local keyFrame = Instance.new("Frame")
keyFrame.Size = UDim2.new(0, 300, 0, 190)
keyFrame.AnchorPoint = Vector2.new(0.5, 0.5)
keyFrame.Position = UDim2.new(0.5, 0, 0.5, 0)
keyFrame.BackgroundColor3 = Color3.fromRGB(30, 30, 30)
keyFrame.BorderSizePixel = 0
keyFrame.Parent = accessGui

local title = Instance.new("TextLabel")
title.Size = UDim2.new(1, 0, 0.3, 0)
title.Position = UDim2.new(0, 0, 0, 0)
title.BackgroundTransparency = 1
title.Text = "Введите ключ (маленькие буквы замените на главные при возможности)"
title.TextColor3 = Color3.new(1, 1, 1)
title.TextScaled = true
title.Font = Enum.Font.Arcade
title.Parent = keyFrame

local textbox = Instance.new("TextBox")
textbox.Size = UDim2.new(0.85, 0, 0.25, 0)
textbox.Position = UDim2.new(0.075, 0, 0.4, 0)
textbox.Font = Enum.Font.Arcade
textbox.TextScaled = true
textbox.Text = ""
textbox.PlaceholderText = "n9tydteaminfo.tilda.ws сайт с ключем"
textbox.TextColor3 = Color3.fromRGB(255, 255, 255)
textbox.BackgroundColor3 = Color3.fromRGB(50, 50, 50)
textbox.BorderSizePixel = 0
textbox.Parent = keyFrame

local button = Instance.new("TextButton")
button.Size = UDim2.new(0.6, 0, 0.2, 0)
button.Position = UDim2.new(0.2, 0, 0.75, 0)
button.Text = "confirm (enter)"
button.Font = Enum.Font.Arcade
button.TextScaled = true
button.TextColor3 = Color3.fromRGB(255, 255, 255)
button.BackgroundColor3 = Color3.fromRGB(0, 150, 0)
button.BorderSizePixel = 0
button.Active = true
button.Parent = keyFrame

local errorLabel = Instance.new("TextLabel")
errorLabel.Size = UDim2.new(1, 0, 0.15, 0)
errorLabel.Position = UDim2.new(0, 0, 0.85, 0)
errorLabel.BackgroundTransparency = 1
errorLabel.TextColor3 = Color3.fromRGB(255, 0, 0)
errorLabel.TextScaled = true
errorLabel.Font = Enum.Font.Arcade
errorLabel.Visible = false
errorLabel.Parent = keyFrame

local closeBtn = Instance.new("TextButton")
closeBtn.Size = UDim2.new(0, 28, 0, 20)
closeBtn.Position = UDim2.new(1, -34, 0, 6)
closeBtn.BackgroundColor3 = Color3.fromRGB(120, 10, 10)
closeBtn.Text = "✖"
closeBtn.Font = Enum.Font.ArialBold
closeBtn.TextScaled = true
closeBtn.TextColor3 = Color3.new(1,1,1)
closeBtn.BorderSizePixel = 0
closeBtn.Parent = keyFrame

closeBtn.MouseButton1Click:Connect(function()
    destroyed = true
    pcall(function() accessGui:Destroy() end)
    print("Скрипт закрыт пользователем.")
end)


local keyUrl = "https://pastebin.com/raw/jrYz5kDk"
local correctKey
do
    local ok, res = pcall(function()
        return game:HttpGet(keyUrl, true)
    end)
    if ok and res and tostring(res) ~= "" then
        correctKey = tostring(res):match("^%s*(.-)%s*$")
    else
        correctKey = nil
        warn("Не удалось получить ключ с сервера: "..tostring(res))
    end
end

local function launchMainGui()
    if destroyed then return end
    pcall(function() accessGui:Destroy() end)

    print("Nhub launching...")
    task.wait(3)
    print("Success")
    task.wait(0.7)

    local screenGui = Instance.new("ScreenGui")
    screenGui.Name = "nhub"
    screenGui.ResetOnSpawn = false
    screenGui.IgnoreGuiInset = true
    screenGui.ZIndexBehavior = Enum.ZIndexBehavior.Sibling
    screenGui.Parent = playerGui

    enableAutoScaling(screenGui, 1920, 1080, 0.55, 1.15)

  
    local image = Instance.new("ImageLabel")
    image.Size = UDim2.new(0.2, 0, 0.2, 0)
    image.Position = UDim2.new(0.2, 0, 0.05, 0)
    image.BackgroundTransparency = 0
	image.BackgroundColor3 = Color3.fromRGB(0, 0, 0)
    image.Image = "rbxassetid://139480704116205"
    image.ScaleType = Enum.ScaleType.Fit
    image.Active = true
    image.Parent = screenGui


    local contentMain = Instance.new("Frame")
    contentMain.Size = UDim2.new(1, 0, 1, 0)
    contentMain.Position = UDim2.new(0, 0, 0, 0)
    contentMain.BackgroundTransparency = 1
    contentMain.Parent = image

    local contentTarget = Instance.new("Frame")
    contentTarget.Size = UDim2.new(1.3, 0, 0.9, 0)
    contentTarget.Position = UDim2.new(0, -50, 0, 0)
    contentTarget.BackgroundTransparency = 1
    contentTarget.Visible = false
    contentTarget.Parent = image

   
    local tooltip = Instance.new("TextLabel")
    tooltip.Size = UDim2.new(0, 100, 0, 37)
    tooltip.BackgroundColor3 = Color3.fromRGB(0, 0, 0)
    tooltip.TextColor3 = Color3.fromRGB(255, 255, 255)
    tooltip.TextScaled = true
    tooltip.Font = Enum.Font.SciFi
    tooltip.Text = ""
    tooltip.Visible = false
    tooltip.ZIndex = 999
    tooltip.Parent = screenGui

    local function showTooltip(text)
        tooltip.Text = text
        tooltip.Visible = true
    end
    local function hideTooltip()
        tooltip.Visible = false
    end
    local function moveTooltip(x, y)
        tooltip.Position = UDim2.new(0, x + 12, 0, y + 12)
    end

    local flyButton = Instance.new("TextButton")
    flyButton.Size = UDim2.new(0, 110, 0, 40)
    flyButton.Position = UDim2.new(0, 0, 0, 0)
    flyButton.BackgroundColor3 = Color3.fromRGB(30, 30, 30)
    flyButton.BackgroundTransparency = 0.3
    flyButton.Text = "fly by n9team"
    flyButton.TextColor3 = Color3.fromRGB(255, 255, 255)
	flyButton.TextTransparency = 0.2
    flyButton.Font = Enum.Font.Arcade
    flyButton.TextScaled = true
    flyButton.TextStrokeTransparency = 0.5
    flyButton.BorderSizePixel = 0
    flyButton.Active = true
    flyButton.Parent = contentMain

    local infButton = Instance.new("TextButton")
    infButton.Size = UDim2.new(0, 112, 0, 40)
    infButton.Position = UDim2.new(0, 130, 0, 0)
    infButton.BackgroundColor3 = Color3.fromRGB(30, 30, 30)
    infButton.BackgroundTransparency = 0.3
    infButton.Text = " Inf Yield "
    infButton.Font = Enum.Font.SciFi
    infButton.TextColor3 = Color3.fromRGB(255, 255, 255)
	infButton.TextTransparency = 0.2 
    infButton.TextStrokeTransparency = 0.1
    infButton.BorderSizePixel = 0
    infButton.Active = true
    infButton.TextScaled = true
    infButton.Parent = contentMain

    local zButton = Instance.new("TextButton")
    zButton.Size = UDim2.new(0, 119, 0, 26)
    zButton.Position = UDim2.new(0, 129, 0.151, -95)
    zButton.BackgroundColor3 = Color3.fromRGB(30, 30, 30)
    zButton.Text = ""
    zButton.Font = Enum.Font.SciFi
    zButton.BackgroundTransparency = 1
    zButton.TextColor3 = Color3.fromRGB(0, 255, 128)
    zButton.TextStrokeTransparency = 0.1
    zButton.BorderSizePixel = 0
    zButton.Active = true
    zButton.TextScaled = true
    zButton.Parent = contentMain

    local hideButton = Instance.new("TextButton")
    hideButton.Size = UDim2.new(0, 40, 0, 20)
    hideButton.Position = UDim2.new(0, 349, 0, 0)
    hideButton.BackgroundColor3 = Color3.fromRGB(0, 0, 0)
    hideButton.Text = "✖"
    hideButton.TextColor3 = Color3.new(1, 1, 1)
    hideButton.Font = Enum.Font.Arcade
    hideButton.TextScaled = true
    hideButton.Active = true
    hideButton.Parent = contentMain

    local showButton = Instance.new("TextButton")
    showButton.Size = UDim2.new(0, 120, 0, 40)
    showButton.Position = UDim2.new(0, 10, 1, -50)
    showButton.BackgroundColor3 = Color3.fromRGB(30, 30, 30)
    showButton.Text = "Show"
    showButton.TextColor3 = Color3.new(1, 1, 1)
    showButton.Font = Enum.Font.Arcade
    showButton.TextScaled = true
    showButton.Active = true
    showButton.Visible = false
    showButton.Parent = screenGui

    local searchButton = Instance.new("TextButton")
    searchButton.Size = UDim2.new(0, 120, 0, 40)
    searchButton.Position = UDim2.new(0, 130, 1, -40)
    searchButton.BackgroundColor3 = Color3.fromRGB(30, 30, 30)
    searchButton.BackgroundTransparency = 0.3
    searchButton.Text = "search"
    searchButton.TextColor3 = Color3.new(149, 33, 246)
    searchButton.Font = Enum.Font.Arcade
    searchButton.TextScaled = true
    searchButton.Active = true
    searchButton.Visible = true
    searchButton.Parent = contentMain

    
    local playerTargetButton = Instance.new("TextButton")
    playerTargetButton.Size = UDim2.new(0, 120, 0, 40)
    
    playerTargetButton.Position = UDim2.new(0, 275, 1, -40)
    playerTargetButton.BackgroundColor3 = Color3.fromRGB(30, 30, 30)
    playerTargetButton.BackgroundTransparency = 0.3
    playerTargetButton.Text = "Player Target"
    playerTargetButton.TextColor3 = Color3.new(149, 33, 246)
    playerTargetButton.Font = Enum.Font.Arcade
    playerTargetButton.TextScaled = true
    playerTargetButton.BorderSizePixel = 0
    playerTargetButton.Active = true
    playerTargetButton.Parent = contentMain

   
    flyButton.MouseEnter:Connect(function() showTooltip("self maded fly for example") end)
    flyButton.MouseLeave:Connect(hideTooltip)
    flyButton.MouseMoved:Connect(moveTooltip)
    infButton.MouseEnter:Connect(function() showTooltip("infinity yield is a base of all scripts") end)
    infButton.MouseLeave:Connect(hideTooltip)
    infButton.MouseMoved:Connect(moveTooltip)
    hideButton.MouseEnter:Connect(function() showTooltip("insert to show on PC") end)
    hideButton.MouseLeave:Connect(hideTooltip)
    hideButton.MouseMoved:Connect(moveTooltip)
    searchButton.MouseEnter:Connect(function() showTooltip("Nhub will analyze on what place you are playing and gives the scripts for it.") end)
    searchButton.MouseLeave:Connect(hideTooltip)
    searchButton.MouseMoved:Connect(moveTooltip)
    zButton.MouseEnter:Connect(function() showTooltip("version 2.3 by bulkabarabulka ") end)
    zButton.MouseLeave:Connect(hideTooltip)
    zButton.MouseMoved:Connect(moveTooltip)
    playerTargetButton.MouseEnter:Connect(function() showTooltip("Открыть панель Player Target") end)
    playerTargetButton.MouseLeave:Connect(hideTooltip)
    playerTargetButton.MouseMoved:Connect(moveTooltip)

    hideButton.MouseButton1Click:Connect(function()
        image.Visible = false
        showButton.Visible = true
    end)
    showButton.MouseButton1Click:Connect(function()
        image.Visible = true
        showButton.Visible = false
    end)

  
local dragging = false
local dragStartPos = Vector2.new(0, 0) 
local imageStartPos = nil 


local function getUiScale()
    local auto = screenGui:FindFirstChild("AutoUIScale")
    if auto and auto:IsA("UIScale") and type(auto.Scale) == "number" then
        return auto.Scale
    end
    return 1
end


image.InputBegan:Connect(function(input)
    if input.UserInputType == Enum.UserInputType.MouseButton1 or input.UserInputType == Enum.UserInputType.Touch then
        dragging = true
        dragStartPos = input.Position
        imageStartPos = image.Position
       
        input.Changed:Connect(function()
            if input.UserInputState == Enum.UserInputState.End then
                dragging = false
            end
        end)
    end
end)


UIS.InputChanged:Connect(function(input)
    if not dragging then return end
    if input.UserInputType ~= Enum.UserInputType.MouseMovement and input.UserInputType ~= Enum.UserInputType.Touch then return end

    local delta = input.Position - dragStartPos
    local scale = getUiScale()
   
    local deltaX = delta.X / scale
    local deltaY = delta.Y / scale

   
    local newX = imageStartPos.X.Scale
    local newXOffset = imageStartPos.X.Offset + deltaX
    local newY = imageStartPos.Y.Scale
    local newYOffset = imageStartPos.Y.Offset + deltaY

    image.Position = UDim2.new(newX, newXOffset, newY, newYOffset)
end)


UIS.InputEnded:Connect(function(input)
    if input.UserInputType == Enum.UserInputType.MouseButton1 or input.UserInputType == Enum.UserInputType.Touch then
        dragging = false
    end
end)


    local oButton, aButton, eButton
    local function runPlaceCommands(placeId)
        if placeId == 1792438584796 then
            print("you cool")
        elseif placeId == 91792438584796 then
            print("hmm might you playng our game?")
            task.wait(0.7)
            print("finding scripts for it...")
            task.wait(2.5)
            print("done!")

            oButton = Instance.new("TextButton")
            oButton.Size = UDim2.new(0, 110, 0, 40)
            oButton.Position = UDim2.new(0, 145, 0.1, 0)
            oButton.BackgroundColor3 = Color3.fromRGB(0, 255, 255)
            oButton.Text = "script1"
            oButton.Font = Enum.Font.SciFi
            oButton.TextColor3 = Color3.fromRGB(255, 255, 255)
            oButton.TextStrokeTransparency = 0.1
            oButton.BorderSizePixel = 0
            oButton.TextScaled = true
            oButton.Active = true
            oButton.Parent = contentMain

            oButton.MouseButton1Click:Connect(function()
                local success, err = pcall(function()
                    loadstring(game:HttpGet('https://raw.githubusercontent.com/tbao143/thaibao/main/TbaohubPrisonLife'))()
                end)
                if success then
                    print("success")
                    oButton.Text = "success"
                    task.wait(1.5)
                    oButton.Text = "script1"
                else
                    print("error")
                    oButton.Text = "error"
                    task.wait(1.5)
                    oButton.Text = "script1"
                    warn("Ошибка загрузки script1: " .. tostring(err))
                end
            end)

            aButton = Instance.new("TextButton")
            aButton.Size = UDim2.new(0, 110, 0, 40)
            aButton.Position = UDim2.new(0, 270, 0.1, 0)
            aButton.BackgroundColor3 = Color3.fromRGB(0, 255, 100)
            aButton.Text = "script2"
            aButton.Font = Enum.Font.SciFi
            aButton.TextColor3 = Color3.fromRGB(0, 255, 128)
            aButton.TextStrokeTransparency = 0.1
            aButton.BorderSizePixel = 0
            aButton.TextScaled = true
            aButton.Active = true
            aButton.Parent = contentMain

            aButton.MouseButton1Click:Connect(function()
                local success, err = pcall(function()
                    loadstring(game:HttpGet('https://raw.githubusercontent.com/tbao143/thaibao/main/TbaohubPrisonLife'))()
                end)
                if success then
                    print("success")
                    aButton.Text = "success"
                    task.wait(1.5)
                    aButton.Text = "script2"
                else
                    print("error")
                    aButton.Text = "error"
                    task.wait(1.5)
                    aButton.Text = "script2"
                    warn("Ошибка загрузки script2: " .. tostring(err))
                end
            end)

            eButton = Instance.new("TextButton")
            eButton.Size = UDim2.new(0, 110, 0, 40)
            eButton.Position = UDim2.new(0, 390, 0.1, 0)
            eButton.BackgroundColor3 = Color3.fromRGB(255, 0, 0)
            eButton.Text = "script3"
            eButton.Font = Enum.Font.SciFi
            eButton.TextColor3 = Color3.fromRGB(255, 255, 255)
            eButton.TextStrokeTransparency = 0.1
            eButton.BorderSizePixel = 0
            eButton.TextScaled = true
            eButton.Active = true
            eButton.Parent = contentMain

            eButton.MouseButton1Click:Connect(function()
                local success, err = pcall(function()
                    loadstring(game:HttpGet('https://raw.githubusercontent.com/tbao143/thaibao/main/TbaohubPrisonLife'))()
                end)
                if success then
                    print("success")
                    eButton.Text = "success"
                    task.wait(1.5)
                    eButton.Text = "script3"
                else
                    print("error")
                    eButton.Text = "error"
                    task.wait(1.5)
                    eButton.Text = "script3"
                    warn("Ошибка загрузки script3: " .. tostring(err))
                end
            end)

            print("sorry but Nhub is still under construction")
        elseif placeId == 555555 then
            print("Place 5 detected!")
        else
            print("PlaceId не найден в списке команд.")
        end
    end

    searchButton.MouseButton1Click:Connect(function()
        local placeId = game.PlaceId
        runPlaceCommands(placeId)
    end)


    local flying = false
    local flySpeed = 50
    local flyBodyVel
    local flyConn

    local function startFly()
        if flying then return end
        flying = true

        local root = player.Character and player.Character:FindFirstChild("HumanoidRootPart")
        if not root then
            player.CharacterAdded:Wait()
            root = player.Character:WaitForChild("HumanoidRootPart")
        end

        flyBodyVel = Instance.new("BodyVelocity")
        flyBodyVel.Velocity = Vector3.zero
        flyBodyVel.MaxForce = Vector3.new(1,1,1) * 1e5
        flyBodyVel.Parent = root

        flyConn = RunService.RenderStepped:Connect(function()
            if flying then
                local cam = workspace.CurrentCamera
                local dir = Vector3.zero

                if UIS:IsKeyDown(Enum.KeyCode.W) then dir += cam.CFrame.LookVector end
                if UIS:IsKeyDown(Enum.KeyCode.S) then dir -= cam.CFrame.LookVector end
                if UIS:IsKeyDown(Enum.KeyCode.A) then dir -= cam.CFrame.RightVector end
                if UIS:IsKeyDown(Enum.KeyCode.D) then dir += cam.CFrame.RightVector end
                if UIS:IsKeyDown(Enum.KeyCode.Space) then dir += Vector3.new(0, 1, 0) end
                if UIS:IsKeyDown(Enum.KeyCode.LeftShift) then dir -= Vector3.new(0, 1, 0) end

                if dir.Magnitude > 0 then
                    flyBodyVel.Velocity = dir.Unit * flySpeed
                else
                    flyBodyVel.Velocity = Vector3.zero
                end
            end
        end)
    end

    local function stopFly()
        flying = false
        if flyBodyVel then flyBodyVel:Destroy() flyBodyVel = nil end
        if flyConn then flyConn:Disconnect() flyConn = nil end
    end

    flyButton.MouseButton1Click:Connect(function()
        if not flying then
            startFly()
            flyButton.Text = "Fly: ON"
        else
            stopFly()
            flyButton.Text = "Fly: OFF"
        end
    end)

    infButton.MouseButton1Click:Connect(function()
        local success, err = pcall(function()
            loadstring(game:HttpGet('https://raw.githubusercontent.com/EdgeIY/infiniteyield/master/source'))()
        end)
        if success then
            infButton.Text = "Загружено!"
            task.wait(1.5)
            infButton.Text = "★ Inf Yield ★"
        else
            infButton.Text = "Ошибка"
            task.wait(1.5)
            infButton.Text = "★ Inf Yield ★"
            warn("Ошибка загрузки InfiniteYield: " .. tostring(err))
        end
    end)

    
    local margin = 6
    local panel = Instance.new("Frame")
    panel.Size = UDim2.new(1, -margin*10, 1.5, -margin*1)
    panel.Position = UDim2.new(0, margin, 0, margin)
    panel.BackgroundColor3 = Color3.fromRGB(30, 30, 30)
    panel.BorderSizePixel = 0
    panel.Parent = contentTarget

    local panelTitle = Instance.new("TextLabel")
    panelTitle.Size = UDim2.new(1, -12, 0, 28)
    panelTitle.Position = UDim2.new(0, 6, 0, 6)
    panelTitle.BackgroundTransparency = 1
    panelTitle.Text = "Player Target"
    panelTitle.TextColor3 = Color3.fromRGB(255,255,255)
    panelTitle.TextScaled = true
    panelTitle.Font = Enum.Font.SciFi
    panelTitle.Parent = panel

    local nameLabel = Instance.new("TextLabel")
    nameLabel.Size = UDim2.new(0.9, 0, 0, 20)
    nameLabel.Position = UDim2.new(0, 6, 0, 40)
    nameLabel.BackgroundTransparency = 1
    nameLabel.Text = "Nickname:"
    nameLabel.TextColor3 = Color3.fromRGB(200,200,200)
    nameLabel.TextScaled = true
    nameLabel.Font = Enum.Font.Gotham
    nameLabel.Parent = panel

    local nameBox = Instance.new("TextBox")
    nameBox.Size = UDim2.new(0.9, 0, 0, 28)
    nameBox.Position = UDim2.new(0, 8, 0, 68)
    nameBox.BackgroundColor3 = Color3.fromRGB(50,50,50)
    nameBox.TextColor3 = Color3.new(1,1,1)
    nameBox.TextScaled = true
    nameBox.Font = Enum.Font.Arial
    nameBox.PlaceholderText = "Введите никнейм игрока"
    nameBox.ClearTextOnFocus = false
    nameBox.Text = ""
    nameBox.Parent = panel

    local targetBtn = Instance.new("TextButton")
    targetBtn.Size = UDim2.new(0.4, 0, 0, 36)
    targetBtn.Position = UDim2.new(0.05, 0, 0, 108)
    targetBtn.BackgroundColor3 = Color3.fromRGB(30, 30, 30)
    targetBtn.Text = "Target"
    targetBtn.TextColor3 = Color3.fromRGB(0, 255, 128)
    targetBtn.Font = Enum.Font.SciFi
    targetBtn.TextScaled = true
    targetBtn.Parent = panel

    local placeIdLabel = Instance.new("TextLabel")
    placeIdLabel.Size = UDim2.new(0.9, 0, 0, 26)
    placeIdLabel.Position = UDim2.new(0, 6, 0, 156)
    placeIdLabel.BackgroundTransparency = 1
    placeIdLabel.Text = "PlaceId: -"
    placeIdLabel.TextColor3 = Color3.fromRGB(255, 215, 0)
    placeIdLabel.TextScaled = true
    placeIdLabel.Font = Enum.Font.GothamBold
    placeIdLabel.Parent = panel

    local placeNameLabel = Instance.new("TextLabel")
    placeNameLabel.Size = UDim2.new(0.9, 0, 0, 26)
    placeNameLabel.Position = UDim2.new(0, 6, 0, 188)
    placeNameLabel.BackgroundTransparency = 1
    placeNameLabel.Text = "PlaceName: -"
    placeNameLabel.TextColor3 = Color3.fromRGB(255, 165, 0)
    placeNameLabel.TextScaled = true
    placeNameLabel.Font = Enum.Font.GothamBold
    placeNameLabel.Parent = panel

    local joinBtn = Instance.new("TextButton")
    joinBtn.Size = UDim2.new(0.4, 0, 0, 36)
    joinBtn.Position = UDim2.new(0.55, 0, 0, 108)
    joinBtn.BackgroundColor3 = Color3.fromRGB(20, 120, 220)
    joinBtn.Text = "Join"
    joinBtn.TextColor3 = Color3.new(1,1,1)
    joinBtn.Font = Enum.Font.Gotham
    joinBtn.TextScaled = true
    joinBtn.Parent = panel

    local clearBtn = Instance.new("TextButton")
    clearBtn.Size = UDim2.new(0.9, 0, 0, 30)
    clearBtn.Position = UDim2.new(0.05, 0, 0, 226)
    clearBtn.BackgroundColor3 = Color3.fromRGB(100, 20, 20)
    clearBtn.Text = "Clear"
    clearBtn.TextColor3 = Color3.new(1,1,1)
    clearBtn.Font = Enum.Font.Gotham
    clearBtn.TextScaled = true
    clearBtn.Parent = panel


    local function findPlayerByNameInsensitive(nick)
        if not nick or nick == "" then return nil end
        local lowerNick = string.lower(nick)
        for _, pl in ipairs(Players:GetPlayers()) do
            if string.lower(pl.Name) == lowerNick or string.lower(tostring(pl.DisplayName or "")) == lowerNick then
                return pl
            end
        end
        return nil
    end


    local function getUserIdFromName(nick)
        if not nick or nick == "" then return nil, "empty" end
        local ok, userIdOrErr = pcall(function() return Players:GetUserIdFromNameAsync(nick) end)
        if ok and tonumber(userIdOrErr) then
            return tonumber(userIdOrErr)
        else
            return nil, tostring(userIdOrErr)
        end
    end

 
    local function getUserPresence(userId)
        local url = ("https://presence.roblox.com/v1/presence/users?userIds=%d"):format(userId)
        local ok, res = pcall(function() return game:HttpGet(url) end)
        if not ok or not res or res == "" then
            return nil, "http_error"
        end
        local decodeOk, data = pcall(function() return HttpService:JSONDecode(res) end)
        if not decodeOk or not data or type(data) ~= "table" then
            return nil, "parse_error"
        end
        if #data >= 1 then
            return data[1], nil
        end
        return nil, "no_data"
    end

   
    local function findServerWithPlayerInUniverse(universeId, userId)
        if not universeId or not userId then return nil, "invalid_args" end
        local cursor = nil
        repeat
            local url = ("https://games.roblox.com/v1/games/%s/servers/Public?limit=100"):format(tostring(universeId))
            if cursor then
                url = url .. "&cursor=" .. HttpService:UrlEncode(cursor)
            end
            local ok, res = pcall(function() return game:HttpGet(url) end)
            if not ok or not res or res == "" then
                return nil, "http_error"
            end
            local decodeOk, data = pcall(function() return HttpService:JSONDecode(res) end)
            if not decodeOk or not data or type(data) ~= "table" then
                return nil, "parse_error"
            end

            if data and data.data then
                for _, server in ipairs(data.data) do
                 
                    if server.playerIds and type(server.playerIds) == "table" then
                        for _, pid in ipairs(server.playerIds) do
                            if tonumber(pid) == tonumber(userId) then
                                -- нашли сервер
                                return server, nil
                            end
                        end
                    end
                    
                end
            end

            cursor = data.nextPageCursor
        until not cursor

        return nil, "not_found"
    end


    local function getPlaceName(placeId)
        local ok, info = pcall(function() return MarketplaceService:GetProductInfo(placeId, Enum.InfoType.Asset) end)
        if ok and info and info.Name then
            return tostring(info.Name)
        end
        return "Unknown"
    end

    
    targetBtn.MouseButton1Click:Connect(function()
        if destroyed then return end
        targetBtn.Text = "Searching..."
        targetBtn.Active = false

        local nick = trim(nameBox.Text or "")
        if nick == "" then
            placeIdLabel.Text = "PlaceId: (empty nickname)"
            placeNameLabel.Text = "PlaceName: -"
            targetBtn.Text = "Target"
            targetBtn.Active = true
            return
        end

      
        local foundLocal = findPlayerByNameInsensitive(nick)
        if foundLocal then
            local curPlaceId = game.PlaceId
            local placeName = getPlaceName(curPlaceId)
            placeIdLabel.Text = "PlaceId: " .. tostring(curPlaceId)
            placeNameLabel.Text = "PlaceName: " .. tostring(placeName)
            showAchievement(("Player %s найден в этом сервере"):format(foundLocal.Name)) 
            targetBtn.Text = "Target"
            targetBtn.Active = true
            return
        end

  
        local userId, err = getUserIdFromName(nick)
        if not userId then
            placeIdLabel.Text = "PlaceId: (user not found)"
            placeNameLabel.Text = "PlaceName: -"
            showAchievement("Не удалось получить userId: "..tostring(err))
            targetBtn.Text = "Target"
            targetBtn.Active = true
            return
        end

 
        local presence, perr = getUserPresence(userId)
        if not presence then
            placeIdLabel.Text = "PlaceId: (presence unavailable)"
            placeNameLabel.Text = "PlaceName: -"
            showAchievement("Не удалось получить presence: "..tostring(perr))
            targetBtn.Text = "Target"
            targetBtn.Active = true
            return
        end


        local targetPlaceId = presence.placeId or presence.rootPlaceId
        local targetUniverseId = presence.universeId
        if not targetPlaceId and not targetUniverseId then
            placeIdLabel.Text = "PlaceId: (player offline)"
            placeNameLabel.Text = "PlaceName: -"
            showAchievement("Игрок офлайн или presence не показывает place.")
            targetBtn.Text = "Target"
            targetBtn.Active = true
            return
        end


        local placeName = "Unknown"
        if targetPlaceId then
            placeName = getPlaceName(targetPlaceId)
            placeIdLabel.Text = "PlaceId: " .. tostring(targetPlaceId)
            placeNameLabel.Text = "PlaceName: " .. tostring(placeName)
        else
            placeIdLabel.Text = "PlaceId: (unknown)"
            placeNameLabel.Text = "PlaceName: " .. tostring(placeName)
        end


        if targetUniverseId then
      
            showAchievement(("Searching instance for %s (userId=%d)..."):format(nick, userId))
            local server, serr = findServerWithPlayerInUniverse(targetUniverseId, userId)
            if server and server.id then
           
                local jobId = server.id
               
                local usePlaceId = targetPlaceId or presence.placeId
               
                placeIdLabel.Text = "PlaceId: " .. tostring(usePlaceId or "(unknown)")
                placeNameLabel.Text = "PlaceName: " .. tostring(getPlaceName(usePlaceId or 0))

               
                panel:SetAttribute("foundJobId", tostring(jobId))
                panel:SetAttribute("foundPlaceId", tostring(usePlaceId or 0))
                panel:SetAttribute("foundUniverseId", tostring(targetUniverseId))

                showAchievement("Instance found! Use Join to teleport.")
            else
                placeIdLabel.Text = placeIdLabel.Text 
                if serr == "not_found" then
                    showAchievement("Инстанс с игроком не найден в списках публичных серверов.")
                else
                    showAchievement("Ошибка при поиске серверов: "..tostring(serr))
                end
            end
        else
            showAchievement("UniverseId недоступен, поиск инстанса невозможен.")
        end

        targetBtn.Text = "Target"
        targetBtn.Active = true
    end)

  
    joinBtn.MouseButton1Click:Connect(function()

    local TeleportService = game:GetService("TeleportService")
 
    local level1Id = ""..tostring(curPlaceId) 
 
    game.Players.PlayerAdded:connect(function(player)
    TeleportService:Teleport(level1Id, player) 
    end)
    end)

 
    clearBtn.MouseButton1Click:Connect(function()
        if destroyed then return end
        nameBox.Text = ""
        placeIdLabel.Text = "PlaceId: -"
        placeNameLabel.Text = "PlaceName: -"
        panel:SetAttribute("foundJobId", nil)
        panel:SetAttribute("foundPlaceId", nil)
        panel:SetAttribute("foundUniverseId", nil)
    end)


    playerTargetButton.MouseButton1Click:Connect(function()
        if destroyed then return end
        contentMain.Visible = false
        contentTarget.Visible = true
    end)


    local backBtn = Instance.new("TextButton")
    backBtn.Size = UDim2.new(0, 30, 0, 27)
    backBtn.Position = UDim2.new(1, -40, 0, 12)
    backBtn.BackgroundColor3 = Color3.fromRGB(50,50,50)
    backBtn.Text = "←"
    backBtn.Font = Enum.Font.ArialBold
    backBtn.TextScaled = true
    backBtn.TextColor3 = Color3.new(1,1,1)
    backBtn.BorderSizePixel = 0
    backBtn.Parent = panel

    backBtn.MouseButton1Click:Connect(function()
        contentTarget.Visible = false
        contentMain.Visible = true
    end)
end

local deviceChoiceGui = Instance.new("ScreenGui")
deviceChoiceGui.Name = "nhub_device_choice"
deviceChoiceGui.ResetOnSpawn = false
deviceChoiceGui.Parent = playerGui
deviceChoiceGui.Enabled = false

enableAutoScaling(deviceChoiceGui, 1920, 1080, 0.55, 1.15)

local deviceFrame = Instance.new("Frame")
deviceFrame.Size = UDim2.new(0, 320, 0, 140)
deviceFrame.AnchorPoint = Vector2.new(0.5, 0.5)
deviceFrame.Position = UDim2.new(0.5, 0, 0.5, 0)
deviceFrame.BackgroundColor3 = Color3.fromRGB(20,20,20)
deviceFrame.BorderSizePixel = 0
deviceFrame.Parent = deviceChoiceGui

local deviceTitle = Instance.new("TextLabel")
deviceTitle.Size = UDim2.new(1, 0, 0.3, 0)
deviceTitle.Position = UDim2.new(0, 0, 0, 6)
deviceTitle.BackgroundTransparency = 1
deviceTitle.Text = "Выберите устройство"
deviceTitle.TextColor3 = Color3.fromRGB(255,255,255)
deviceTitle.TextScaled = true
deviceTitle.Font = Enum.Font.GothamBold
deviceTitle.Parent = deviceFrame

local pcBtn = Instance.new("TextButton")
pcBtn.Size = UDim2.new(0.42, 0, 0.25, 0)
pcBtn.Position = UDim2.new(0.05, 0, 0.5, 0)
pcBtn.BackgroundColor3 = Color3.fromRGB(30, 30, 30)
pcBtn.Text = "ПК"
pcBtn.TextColor3 = Color3.fromRGB(255,255,255)
pcBtn.Font = Enum.Font.Gotham
pcBtn.TextScaled = true
pcBtn.Parent = deviceFrame

local phoneBtn = Instance.new("TextButton")
phoneBtn.Size = UDim2.new(0.42, 0, 0.25, 0)
phoneBtn.Position = UDim2.new(0.53, 0, 0.5, 0)
phoneBtn.BackgroundColor3 = Color3.fromRGB(30, 30, 30)
phoneBtn.Text = "Телефон (compact)"
phoneBtn.TextColor3 = Color3.fromRGB(255,255,255)
phoneBtn.Font = Enum.Font.Gotham
phoneBtn.TextScaled = true
phoneBtn.Parent = deviceFrame

local cancelBtn = Instance.new("TextButton")
cancelBtn.Size = UDim2.new(0.9, 0, 0.18, 0)
cancelBtn.Position = UDim2.new(0.05, 0, 0.82, 0)
cancelBtn.BackgroundColor3 = Color3.fromRGB(80, 10, 10)
cancelBtn.Text = "Отмена"
cancelBtn.TextColor3 = Color3.fromRGB(255,255,255)
cancelBtn.Font = Enum.Font.Gotham
cancelBtn.TextScaled = true
cancelBtn.Parent = deviceFrame

pcBtn.MouseButton1Click:Connect(function()
    if destroyed then return end
    deviceChoiceGui.Enabled = false
    launchMainGui()
end)
phoneBtn.MouseButton1Click:Connect(function()
    print("PC version is a mobile adapted")
    task.wait(2)
    print("this button not avaible now")
end)
cancelBtn.MouseButton1Click:Connect(function()
    deviceChoiceGui.Enabled = false
    if accessGui and accessGui.Parent then
        accessGui.Enabled = true
    end
end)


local function validateKey()
    if destroyed then return end

    local entered = trim(textbox.Text or "")
    if not correctKey then
        errorLabel.Text = "Сервер ключей недоступен. Попробуйте позже."
        errorLabel.Visible = true
        task.wait(2)
        errorLabel.Visible = false
        return
    end

    if entered == trim(correctKey) then
        print("nhub launching...")
        if accessGui and accessGui.Parent then
            accessGui.Enabled = false
        end
        deviceChoiceGui.Enabled = true
    else
        errorLabel.Text = "Неверный ключ!"
        errorLabel.Visible = true
        task.wait(1.5)
        errorLabel.Visible = false

        if syn and syn.open then
            pcall(function() syn.open("https://n9tydteaminfo.tilda.ws/") end)
        elseif KRNL_LOADED and krnl_open then
            pcall(function() krnl_open("https://n9tydteaminfo.tilda.ws/") end)
        elseif request and request.open then
            pcall(function() request.open("https://n9tydteaminfo.tilda.ws/") end)
        else
            pcall(function()
                game.StarterGui:SetCore("SendNotification", {
                    Title = "Ошибка ключа",
                    Text = "Перейдите по ссылке: https://n9tydteaminfo.tilda.ws/",
                    Duration = 6
                })
            end)
        end
    end
end

button.MouseButton1Click:Connect(validateKey)
textbox.FocusLost:Connect(function(enterPressed)
    if enterPressed then validateKey() end
end)

UIS.InputBegan:Connect(function(input, gameProcessed)
    if gameProcessed then return end
    if input.UserInputType == Enum.UserInputType.Keyboard and input.KeyCode == Enum.KeyCode.Insert then
        if accessGui and accessGui.Parent and not destroyed then
            accessGui.Enabled = true
            if deviceChoiceGui then deviceChoiceGui.Enabled = false end
        end
    end
end)

if not accessGui or not accessGui.Parent then
    destroyed = true
end
